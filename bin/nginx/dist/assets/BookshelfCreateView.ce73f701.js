import{d as _,j as c,i as b,n as v,o as a,c as n,f as E,a as e,b as l,v as i,y as k,F as y,p as C,z as D,w as g,k as x,m as B,t as F}from"./index.0ad1aa9b.js";const V=e("h1",null,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0440\u0435\u0446\u0435\u043D\u0437\u0438\u044E",-1),w={key:0,class:"alert alert-danger",role:"alert"},M={class:"row p-3"},U={class:"mb-3 col-sm-12 col-md-6"},j=e("label",{class:"form-label"},"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043D\u0438\u0433\u0438",-1),q={class:"mb-3 col-sm-12 col-md-6"},A=e("label",{class:"form-label"},"\u0410\u0432\u0442\u043E\u0440",-1),S={class:"mb-3 col-sm-12 col-md-6"},N=e("label",{class:"form-label"},"\u0424\u043E\u0442\u043E",-1),R={class:"mb-3 col-sm-12 col-md-6"},T=e("label",{class:"form-label"},"\u0420\u0435\u0439\u0442\u0438\u043D\u0433",-1),z=["value"],I=e("div",{class:"form-text"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0443 \u043E\u0446\u0435\u043D\u043A\u0443 \u043E\u0442 1 \u0434\u043E 10, \u0433\u0434\u0435 10 - \u0445\u043E\u0440\u043E\u0448\u043E, \u0430 1 - \u043F\u043B\u043E\u0445\u043E.",-1),L={class:"mb-3"},P={class:"mb-3 form-check d-flex justify-content-end"},G=e("label",{class:"form-label"},"\u041F\u0440\u043E\u0447\u0438\u0442\u0430\u043D\u043E",-1),K=_({__name:"BookshelfCreateView",setup(H){const p=x(),d=c(null),r=c(!1);function m(){const s=[];for(let u=1;u<11;u++)s.push({name:u,value:u});return s}const t=b({title:"",description:"",author:"",photo:"",rating:1,is_read:!1});function f(s){t.photo=s.target.files[0]||s.dataTransfer.files[0]}function h(){if(!t.title||!t.author||!t.photo)r.value=!0,setInterval(()=>{r.value=!1},5e3);else{const s="bookshelf/books/",u=new FormData;u.append("title",t.title),u.append("description",t.description),u.append("author",t.author),u.append("photo",t.photo),u.append("rating",t.rating),u.append("is_read",t.is_read),B.post(s,u).then(o=>{p.push({name:"bookshelf-detail",params:{id:o.data.id}})}).catch(o=>{alert(o)})}}return v(()=>{d.value.focus()}),(s,u)=>(a(),n("div",null,[V,r.value?(a(),n("div",w,"\u041E\u0448\u0438\u0431\u043A\u0430! \u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043F\u043E\u043B\u044F!")):E("",!0),e("form",{class:"card",onSubmit:u[5]||(u[5]=g(()=>{},["prevent"]))},[e("div",M,[e("div",U,[j,l(e("input",{"onUpdate:modelValue":u[0]||(u[0]=o=>t.title=o),required:"",type:"text",class:"form-control"},null,512),[[i,t.title]])]),e("div",q,[A,l(e("input",{"onUpdate:modelValue":u[1]||(u[1]=o=>t.author=o),required:"",type:"text",class:"form-control"},null,512),[[i,t.author]])]),e("div",S,[N,e("input",{ref_key:"photo",ref:d,type:"file",required:"",class:"form-control",onChange:f},null,544)]),e("div",R,[T,l(e("select",{"onUpdate:modelValue":u[2]||(u[2]=o=>t.rating=o),class:"form-control"},[(a(!0),n(y,null,C(m(),o=>(a(),n("option",{key:o.name,value:o.value},F(o.name),9,z))),128))],512),[[k,t.rating]]),I]),e("div",L,[l(e("textarea",{"onUpdate:modelValue":u[3]||(u[3]=o=>t.description=o),class:"form-control",cols:"30",rows:"10"},null,512),[[i,t.description]])]),e("div",P,[l(e("input",{"onUpdate:modelValue":u[4]||(u[4]=o=>t.is_read=o),type:"checkbox",class:"form-check-input"},null,512),[[D,t.is_read]]),G]),e("div",{class:"d-flex justify-content-end"},[e("button",{type:"submit",class:"btn btn-primary",onClick:h},"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0440\u0435\u0446\u0435\u043D\u0437\u0438\u044E")])])],32)]))}});export{K as default};
